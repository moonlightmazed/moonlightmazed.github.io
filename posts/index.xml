<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts on MoonLightMaze’s Blog</title>
    <link>https://moonlightmazed.github.io/posts/</link>
    <description>Recent content in Posts on MoonLightMaze’s Blog</description>
    <generator>Hugo</generator>
    <language>zh-Hans</language>
    <lastBuildDate>Wed, 19 Mar 2025 15:33:05 +0800</lastBuildDate>
    <atom:link href="https://moonlightmazed.github.io/posts/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Pv</title>
      <link>https://moonlightmazed.github.io/posts/kubernetes/pv/</link>
      <pubDate>Wed, 19 Mar 2025 15:33:05 +0800</pubDate>
      <guid>https://moonlightmazed.github.io/posts/kubernetes/pv/</guid>
      <description>&lt;p&gt;Cut out summary from your post content here.&lt;/p&gt;</description>
    </item>
    <item>
      <title>HPA</title>
      <link>https://moonlightmazed.github.io/posts/kubernetes/hpa/</link>
      <pubDate>Wed, 19 Mar 2025 15:32:19 +0800</pubDate>
      <guid>https://moonlightmazed.github.io/posts/kubernetes/hpa/</guid>
      <description>&lt;p&gt;Cut out summary from your post content here.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Config</title>
      <link>https://moonlightmazed.github.io/posts/kubernetes/config/</link>
      <pubDate>Wed, 19 Mar 2025 15:31:26 +0800</pubDate>
      <guid>https://moonlightmazed.github.io/posts/kubernetes/config/</guid>
      <description>&lt;p&gt;Cut out summary from your post content here.&lt;/p&gt;</description>
    </item>
    <item>
      <title>Tekton</title>
      <link>https://moonlightmazed.github.io/posts/cicd/tekton/</link>
      <pubDate>Thu, 14 Mar 2024 03:03:52 +0800</pubDate>
      <guid>https://moonlightmazed.github.io/posts/cicd/tekton/</guid>
      <description>&lt;h2 id=&#34;tekton-基本概念&#34;&gt;Tekton 基本概念&lt;/h2&gt;&#xA;&lt;h3 id=&#34;1核心概念k8s-原生的-cicd-引擎&#34;&gt;1、核心概念：K8s 原生的 CI/CD 引擎&lt;/h3&gt;&#xA;&lt;p&gt;Tekton 是 CNCF 孵化项目，以 K8s 为运行底座，将 CI/CD 流程抽象为可扩展的 API 资源。其设计哲学是 “一切皆资源”。&lt;/p&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th style=&#34;text-align: center&#34;&gt;概念&lt;/th&gt;&#xA;          &lt;th style=&#34;text-align: center&#34;&gt;描述&lt;/th&gt;&#xA;          &lt;th style=&#34;text-align: center&#34;&gt;云原生价值&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;&lt;strong&gt;Step&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;每个 &lt;code&gt;Step&lt;/code&gt;直接对应一个容器&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;容器化原子操作（独立隔离）&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;&lt;strong&gt;Task&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;&lt;code&gt;Task&lt;/code&gt;是&lt;code&gt;Pipeline&lt;/code&gt;的最小执行单元，其核心是 “完成一个具体的离散操作”, 每个&lt;code&gt;Task&lt;/code&gt;对应一个&lt;code&gt;Pod&lt;/code&gt;&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;可复用的原子任务（K8s CRD）&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;&lt;strong&gt;Pipeline&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;&lt;code&gt;Pipeline&lt;/code&gt;通过定义 “拉取 → 构建 → 测试 → 部署” 等阶段，让软件交付像工厂流水线一样高效可控&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;任务编排（支持并行 / 依赖）&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;&lt;strong&gt;Workspace&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;&lt;code&gt;Workspace&lt;/code&gt;是连接 &lt;code&gt;Task&lt;/code&gt; 和 &lt;code&gt;Pipeline&lt;/code&gt;的核心组件，用于跨容器、跨任务共享数据。&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;跨任务文件共享（PVC 或 Volume）&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;&lt;strong&gt;Trigger&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;&lt;code&gt;Triggers&lt;/code&gt;是实现 事件驱动流水线 的核心组件，用于自动响应外部事件（如代码提交、API 调用）触发 &lt;code&gt;Pipeline&lt;/code&gt;执行。&lt;/td&gt;&#xA;          &lt;td style=&#34;text-align: center&#34;&gt;事件驱动（Webhook/Git 推送）&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;h3 id=&#34;2流水线架构&#34;&gt;2、流水线架构&lt;/h3&gt;&#xA;&lt;p&gt;&lt;img src=&#34;index.assets/image-20250314045121252.png&#34; alt=&#34;image-20250314045121252&#34;&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>Harbor</title>
      <link>https://moonlightmazed.github.io/posts/cicd/harbor/</link>
      <pubDate>Sat, 13 Jan 2024 18:48:49 +0800</pubDate>
      <guid>https://moonlightmazed.github.io/posts/cicd/harbor/</guid>
      <description>&lt;h2 id=&#34;docker-安装&#34;&gt;Docker 安装&lt;/h2&gt;&#xA;&lt;h3 id=&#34;更新系统与安装依赖&#34;&gt;更新系统与安装依赖&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo dnf update -y&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo dnf install -y yum-utils device-mapper-persistent-data lvm2&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;配置国内-docker-源&#34;&gt;配置国内 Docker 源&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo sed -i &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;s/download.docker.com/mirrors.aliyun.com\/docker-ce/&amp;#39;&lt;/span&gt; /etc/yum.repos.d/docker-ce.repo&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;安装-docker&#34;&gt;安装 Docker&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo dnf install -y docker-ce docker-ce-cli containerd.io&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;安装完成后启动服务并设置开机自启&#34;&gt;安装完成后启动服务并设置开机自启&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo systemctl start docker&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo systemctl enable docker&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;配置国内镜像加速器&#34;&gt;配置国内镜像加速器&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo mkdir -p /etc/docker&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo tee /etc/docker/daemon.json &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;lt;&amp;lt;EOF&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;{&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;  &amp;#34;registry-mirrors&amp;#34;: [&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;   &amp;#34;https://192e82cca03a4a8aa64fea319af4dd55.mirror.swr.myhuaweicloud.com&amp;#34;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;    &amp;#34;https://yp8sluaa.mirror.aliyuncs.com&amp;#34;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;    &amp;#34;https://registry.docker-cn.com&amp;#34;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;    &amp;#34;https://mirror.ccs.tencentyun.com&amp;#34;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;    &amp;#34;https://registry.hub.docker.com&amp;#34;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;    &amp;#34;http://hub-mirror.c.163.com&amp;#34;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;    &amp;#34;https://docker.mirrors.ustc.edu.cn&amp;#34;,&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;    &amp;#34;https://registry.docker-cn.com&amp;#34;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;  ]&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;}&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#e6db74&#34;&gt;EOF&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;证书&#34;&gt;证书&lt;/h2&gt;&#xA;&lt;h3 id=&#34;创建证书目录&#34;&gt;创建证书目录&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo mkdir -p /etc/harbor/ssl&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cd /etc/harbor/ssl&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;生成自签名证书&#34;&gt;生成自签名证书&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 生成私钥&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo openssl genrsa -out harbor.local.com.key &lt;span style=&#34;color:#ae81ff&#34;&gt;2048&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 生成证书签名请求（注意替换IP/域名）&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo openssl req -new -key harbor.local.com.key -out harbor.local.com.csr -subj &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/CN=harbor.local.com&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 生成自签名证书（有效期10年）&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;openssl req -x509 -nodes -days &lt;span style=&#34;color:#ae81ff&#34;&gt;3650&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;  -newkey rsa:2048 &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;  -keyout harbor.local.com.key &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;  -out harbor.local.com.crt &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;  -subj &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;/CN=harbor.local.com&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;\&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;&lt;/span&gt;  -addext &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;subjectAltName=IP:192.168.66.66,DNS:harbor.local.com&amp;#34;&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#设置权限&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo chmod &lt;span style=&#34;color:#ae81ff&#34;&gt;600&lt;/span&gt; harbor.local.com.key&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;将证书加入系统&#34;&gt;将证书加入系统&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 将Harbor的证书复制到系统CA信任目录&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo mkdir -p /etc/pki/ca-trust/source/anchors&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo cp /etc/harbor/ssl/harbor.local.com.crt /etc/pki/ca-trust/source/anchors/&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 更新系统证书信任库&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo update-ca-trust extract&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;验证证书信任状态&#34;&gt;验证证书信任状态&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 检查证书是否已加入信任库&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo trust list | grep harbor.local.com&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 应显示类似：harbor.local.com: CN=harbor.local.com&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;docker-证书信任&#34;&gt;docker 证书信任&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 创建Docker证书目录&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo mkdir -p /etc/docker/certs.d/harbor.local.com&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 复制证书到Docker目录&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo cp /etc/harbor/ssl/harbor.local.com.crt /etc/docker/certs.d/harbor.local.com/ca.crt&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 重启Docker服务&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo systemctl daemon-reload&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo systemctl restart docker&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;使用-openssl-验证证书链&#34;&gt;使用 openssl 验证证书链&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;openssl s_client -connect harbor.local.com:443 -showcerts&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 检查输出中是否包含Verify return code: 0 (ok)&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;使用-lets-encrypt-免费证书生产环境推荐&#34;&gt;使用 Let&amp;rsquo;s Encrypt 免费证书（生产环境推荐）&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 安装Certbot&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo yum install -y certbot&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 生成证书&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo certbot certonly --standalone -d harbor.local.com&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;部署-harbor&#34;&gt;部署 harbor&lt;/h2&gt;&#xA;&lt;h3 id=&#34;下载镜像&#34;&gt;下载镜像&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;wget https://github.com/amy5200/harbor-arm64/releases/download/v2.11.0/harbor-v2.11.0-aarch64.tar.gz&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo tar -zxvf harbor-v2.11.0-aarch64.tar.gz -C /usr/local&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;cd /usr/local/harbor&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;配置文件&#34;&gt;配置文件&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;hostname&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;harbor.local.com&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# 域名&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;http&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;port&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;80&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# 非必要可注释&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;https&lt;/span&gt;:&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;port&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;443&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;certificate&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;/etc/harbor/ssl/harbor.local.com.crt&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#f92672&#34;&gt;private_key&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;/etc/harbor/ssl/harbor.local.com.key&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;harbor_admin_password&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;Harbor12345&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# 管理员密码&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;data_volume&lt;/span&gt;: &lt;span style=&#34;color:#ae81ff&#34;&gt;/data/harbor&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;# 存储路径&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;启动&#34;&gt;启动&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 预处理配置&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo ./prepare&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 启动安装&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;sudo ./install.sh&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;登陆&#34;&gt;登陆&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# 验证&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;curl https://harbor.local.com&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;# Docker客户端登陆&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;docker login harbor.local.com -u admin&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    <item>
      <title>Command</title>
      <link>https://moonlightmazed.github.io/posts/kubernetes/command/</link>
      <pubDate>Mon, 02 Nov 2020 12:13:02 +0800</pubDate>
      <guid>https://moonlightmazed.github.io/posts/kubernetes/command/</guid>
      <description>&lt;h2 id=&#34;集群信息&#34;&gt;&lt;strong&gt;集群信息：&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;显示 Kubernetes 版本：&lt;code&gt;kubectl version&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;显示集群信息：&lt;code&gt;kubectl cluster-info&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;列出集群中的所有节点：&lt;code&gt;kubectl get nodes&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;查看一个具体的节点详情：&lt;code&gt;kubectl describe node &amp;lt;node-name&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;列出所有命名空间：&lt;code&gt;kubectl get namespaces&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;列出所有命名空间中的所有 pod：&lt;code&gt;kubectl get pods --all-namespaces&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;pod-诊断&#34;&gt;&lt;strong&gt;Pod 诊断：&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;列出特定命名空间中的 pod：&lt;code&gt;kubectl get pods -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;查看一个 Pod 详情：&lt;code&gt;kubectl describe pod &amp;lt;pod-name&amp;gt; -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;查看 Pod 日志：&lt;code&gt;kubectl logs &amp;lt;pod-name&amp;gt; -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;尾部 Pod 日志：&lt;code&gt;kubectl logs -f &amp;lt;pod-name&amp;gt; -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;在 pod 中执行命令：&lt;code&gt;kubectl exec -it &amp;lt;pod-name&amp;gt; -n &amp;lt;namespace&amp;gt; -- &amp;lt;command&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;pod-健康检查&#34;&gt;&lt;strong&gt;Pod 健康检查：&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;检查 Pod 准备情况：&lt;code&gt;kubectl get pods &amp;lt;pod-name&amp;gt; -n &amp;lt;namespace&amp;gt; -o jsonpath=&#39;{.status.conditions[?(@.type==&amp;quot;Ready&amp;quot;)].status}&#39;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;检查 Pod 事件：&lt;code&gt;kubectl get events -n &amp;lt;namespace&amp;gt; --field-selector involvedObject.name=&amp;lt;pod-name&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;service诊断&#34;&gt;&lt;strong&gt;Service诊断：&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;列出命名空间中的所有服务：&lt;code&gt;kubectl get svc -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;查看一个服务详情：&lt;code&gt;kubectl describe svc &amp;lt;service-name&amp;gt; -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;deployment诊断&#34;&gt;&lt;strong&gt;Deployment诊断：&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;列出命名空间中的所有Deployment：&lt;code&gt;kubectl get deployments -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;查看一个Deployment详情：&lt;code&gt;kubectl describe deployment &amp;lt;deployment-name&amp;gt; -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;查看滚动发布状态：&lt;code&gt;kubectl rollout status deployment/&amp;lt;deployment-name&amp;gt; -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;查看滚动发布历史记录：&lt;code&gt;kubectl rollout history deployment/&amp;lt;deployment-name&amp;gt; -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;statefulset诊断&#34;&gt;&lt;strong&gt;StatefulSet诊断：&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;列出命名空间中的所有 StatefulSet：&lt;code&gt;kubectl get statefulsets -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;查看一个 StatefulSet详情：&lt;code&gt;kubectl describe statefulset &amp;lt;statefulset-name&amp;gt; -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;configmap-和secret诊断&#34;&gt;&lt;strong&gt;ConfigMap 和Secret诊断：&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;列出命名空间中的 ConfigMap：&lt;code&gt;kubectl get configmaps -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;查看一个ConfigMap详情：&lt;code&gt;kubectl describe configmap &amp;lt;configmap-name&amp;gt; -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;列出命名空间中的 Secret：&lt;code&gt;kubectl get secrets -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;查看一个Secret详情：&lt;code&gt;kubectl describe secret &amp;lt;secret-name&amp;gt; -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;命名空间诊断&#34;&gt;&lt;strong&gt;命名空间诊断：&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;查看一个命名空间详情：&lt;code&gt;kubectl describe namespace &amp;lt;namespace-name&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;资源使用情况&#34;&gt;&lt;strong&gt;资源使用情况：&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;检查 pod 的资源使用情况：&lt;code&gt;kubectl top pod &amp;lt;pod-name&amp;gt; -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;检查节点资源使用情况：&lt;code&gt;kubectl top nodes&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;网络诊断&#34;&gt;&lt;strong&gt;网络诊断：&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;显示命名空间中 Pod 的 IP 地址：&lt;code&gt;kubectl get pods -n &amp;lt;namespace&amp;gt; -o custom-columns=POD:metadata.name,IP:status.podIP --no-headers&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;列出命名空间中的所有网络策略：&lt;code&gt;kubectl get networkpolicies -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;查看一个网络策略详情：&lt;code&gt;kubectl describe networkpolicy &amp;lt;network-policy-name&amp;gt; -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;持久卷-pv-和持久卷声明-pvc-诊断&#34;&gt;&lt;strong&gt;持久卷 (PV) 和持久卷声明 (PVC) 诊断：&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;列出PV：&lt;code&gt;kubectl get pv&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;查看一个PV详情：&lt;code&gt;kubectl describe pv &amp;lt;pv-name&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;列出命名空间中的 PVC：&lt;code&gt;kubectl get pvc -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;查看PVC详情：&lt;code&gt;kubectl describe pvc &amp;lt;pvc-name&amp;gt; -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;节点诊断&#34;&gt;&lt;strong&gt;节点诊断：&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;获取特定节点上运行的 Pod 列表：&lt;code&gt;kubectl get pods --field-selector spec.nodeName=&amp;lt;node-name&amp;gt; -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;资源配额和限制&#34;&gt;&lt;strong&gt;资源配额和限制：&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;列出命名空间中的资源配额：&lt;code&gt;kubectl get resourcequotas -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;查看一个资源配额详情：&lt;code&gt;kubectl describe resourcequota &amp;lt;resource-quota-name&amp;gt; -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;自定义资源定义-crd-诊断&#34;&gt;&lt;strong&gt;自定义资源定义 (CRD) 诊断：&lt;/strong&gt;&lt;/h2&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;列出命名空间中的自定义资源：&lt;code&gt;kubectl get &amp;lt;custom-resource-name&amp;gt; -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;查看自定义资源详情：&lt;code&gt;kubectl describe &amp;lt;custom-resource-name&amp;gt; &amp;lt;custom-resource-instance-name&amp;gt; -n &amp;lt;namespace&amp;gt;&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;p&gt;使用这些命令时，请记住将&lt;code&gt;&amp;lt;namespace&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;pod-name&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;service-name&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;deployment-name&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;statefulset-name&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;configmap-name&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;secret-name&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;namespace-name&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;pv-name&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;pvc-name&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;node-name&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;network-policy-name&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;resource-quota-name&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;custom-resource-name&amp;gt;&lt;/code&gt;, 和替换为你的特定值。&#xA;&lt;code&gt;&amp;lt;custom-resource-instance-name&amp;gt;&lt;/code&gt;这些命令应该可以帮助你诊断 Kubernetes 集群以及在其中运行的应用程序。&lt;/p&gt;</description>
    </item>
    <item>
      <title>Service</title>
      <link>https://moonlightmazed.github.io/posts/kubernetes/service/</link>
      <pubDate>Sat, 03 Oct 2020 09:42:31 +0800</pubDate>
      <guid>https://moonlightmazed.github.io/posts/kubernetes/service/</guid>
      <description>&lt;h2 id=&#34;一service-概念&#34;&gt;一、Service 概念&lt;/h2&gt;&#xA;&lt;p&gt;Kubernetes &lt;code&gt;Service&lt;/code&gt;定义了这样一种抽象：逻辑上的一组 &lt;code&gt;Pod&lt;/code&gt;，一种可以访问它们的策略 —— 通常被称为微服务。这一组 &lt;code&gt;Pod &lt;/code&gt;能够被 &lt;code&gt;Service&lt;/code&gt; 访问到，通常是通过 &lt;code&gt;selector&lt;/code&gt;实现的。&lt;/p&gt;</description>
    </item>
    <item>
      <title>Controller</title>
      <link>https://moonlightmazed.github.io/posts/kubernetes/controller/</link>
      <pubDate>Fri, 02 Oct 2020 22:11:02 +0800</pubDate>
      <guid>https://moonlightmazed.github.io/posts/kubernetes/controller/</guid>
      <description>&lt;h2 id=&#34;一controller-概述&#34;&gt;一、Controller 概述&lt;/h2&gt;&#xA;&lt;p&gt;在 Kubernetes 中，控制器（Controller）是一个核心概念，它是一种控制循环，通过持续监控 Kubernetes API 服务器中的对象状态，并根据期望状态与实际状态的差异采取相应的操作，以确保系统始终处于用户所期望的状态。控制器不断地比较期望状态和实际状态，然后对资源进行创建、更新或删除操作，使实际状态逐渐趋近于期望状态。&lt;/p&gt;</description>
    </item>
    <item>
      <title>Pod</title>
      <link>https://moonlightmazed.github.io/posts/kubernetes/pod/</link>
      <pubDate>Fri, 02 Oct 2020 17:43:02 +0800</pubDate>
      <guid>https://moonlightmazed.github.io/posts/kubernetes/pod/</guid>
      <description>&lt;h1 id=&#34;pod-解析&#34;&gt;Pod 解析：&lt;/h1&gt;&#xA;&lt;h2 id=&#34;一pod-基础概念&#34;&gt;一、Pod 基础概念&lt;/h2&gt;&#xA;&lt;h3 id=&#34;1-定义&#34;&gt;1. 定义&lt;/h3&gt;&#xA;&lt;p&gt;在 Kubernetes（K8s）里，Pod 属于最基础且最小的可部署单元。它代表一组紧密关联的容器集合，这些容器会共享存储、网络以及运行环境。可以把 Pod 当作是运行特定应用程序的一个“逻辑主机”。&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
